# Finance Bot (patched)

В этом архиве — исправленный проект Telegram-бота (aiogram v3 compatible).

**Основные правки:**
- Переписана логика построения графиков (месячная агрегация, grouped bar charts) — `finance_bot/analytics.py`.
- Исправлена отправка изображений в `finance_bot/handlers/reports.py` (FSInputFile + отложенное удаление на Windows).
- Добавлены резервные копии изменённых файлов рядом с оригиналами: `*.bak_*`.
- Добавлен `requirements.txt` с необходимыми пакетами.

**Требования:**
- Python 3.10+ (рекомендовано)
- Рекомендуется создать и активировать виртуальное окружение
- Установить зависимости: `pip install -r requirements.txt`

**Запуск:**
1. Создать `.env` в корне проекта с переменной `TG_BOT_TOKEN=токен_бота` (в файле уже есть пример `.env.example`).
2. Запустить: `python -m finance_bot.bot`

Если на Windows возникают ошибки с удалением временных файлов, они обработаны — временный файл удаляется с небольшой задержкой.

Если график пустой — проверьте, что в базе `finance.db` есть записи за нужный период.
